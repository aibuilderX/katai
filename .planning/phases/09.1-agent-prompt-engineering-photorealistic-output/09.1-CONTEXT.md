# Phase 9.1: Agent Prompt Engineering + Photorealistic Output - Context

**Gathered:** 2026-02-19
**Status:** Ready for planning

<domain>
## Phase Boundary

Optimize prompts for all 5 pipeline agents (Strategic Insight, Creative Director, Copywriter, Art Director, JP Localization) using research-backed prompt engineering best practices. Art Director produces ultra-realistic photographic characters. Each agent gets a NotebookLM knowledge notebook created and key knowledge baked into prompts (runtime querying stays Phase 11). A/B comparison proves measurable quality improvement over naive prompts.

</domain>

<decisions>
## Implementation Decisions

### Strategic Insight Agent

#### Framework Validation
- Research-driven decision on whether Schwartz awareness levels, LF8 desires, and SB7 triggers are the right frameworks for the Japanese market
- Full framework swap is acceptable if Japanese-native frameworks are clearly better
- Validate each dimension independently — awareness, desires, and triggers may each have different outcomes (some stay, others swap)
- Research what Japanese advertisers actually use for their own market

#### Output Design
- Framework-specific labels in output schema (not generic field names) — downstream agent prompts are engineered as a cohesive system that understands the chosen terminology
- Always infer confidently from whatever brief information is available — pipeline never stalls on sparse input
- Confidence scores: generate (high/medium/low) per classification but don't mandate downstream agents to act on them — free data at negligible token cost
- Whether to include market/competitive context analysis: research what's useful for downstream agents

### Creative Director Agent

#### Intelligence Foundation
- NotebookLM knowledge base created in Phase 9.1 with Japanese creative direction conventions
- Knowledge extracted from notebook and baked directly into the prompt (runtime live querying is Phase 11)
- Japanese creative conventions researched and encoded into the prompt — creativity from researched knowledge, not random LLM generation
- Few-shot examples: research whether they add value and how to design them effectively

#### Output Behavior
- Mode-dependent concept generation: single best concept for Auto mode (frictionless), 2-3 concept options for Pro mode (user choice)
- Output format (structured creative brief vs narrative): research what format downstream agents work best with

### Copywriter Agent

#### Japanese Copy Generation
- Japanese register: research Japanese advertising norms to determine register by product category (not a single default)
- Language approach: research whether Claude produces better Japanese marketing copy natively in Japanese or via English intermediate step
- Platform-specific copy: research Japanese platform norms — what works on LINE vs Instagram vs X in Japan may require fundamentally different approaches, not just reformatting
- Output includes copy + rationale notes explaining key decisions (word choice, CTA style, register) — enables more efficient JP Localization review and faster critique loop resolution

### Art Director Agent

#### Meta-Prompt System
- Case-by-case prompt generation via a meta-prompt system — no fixed visual style template
- The meta-prompt teaches the agent HOW to craft detailed, photorealistic image prompts regardless of specific scenario
- Category-aware prompt templates for different product types (cosmetics, food, fashion, service, tech, etc.) — different categories need fundamentally different visual approaches
- Category classification mechanism: research the most effective approach (upstream classification vs Art Director inference vs predefined set)

#### Photorealistic Quality
- Default demographic: Japanese models and features matching the Japanese marketing audience
- Anti-patterns to avoid: plastic/pore-less skin, flat lighting without shadows or depth, generic poses/expressions, lack of imperfections and random natural elements
- Self-critique loop: Art Director reviews its own prompts against a quality checklist before finalizing — mandatory step
- Self-critique architecture (separate evaluation call vs chain-of-thought): research best approach
- Camera/lens/film descriptors as realism technique: research best approach for Flux
- Negative prompt strategy: research whether Flux effectively uses negative prompts

#### Scope & Variations
- Meta-prompt scope (people only vs all visuals): research what's needed
- Text compositing awareness (safe zones for Japanese text overlay): research whether it improves final output
- Image variations: mode-dependent (1 optimized prompt for Auto, 2-3 variations for Pro)
- Video prompt scope (static images only vs keyframes/thumbnails): research whether unified visual prompting improves consistency
- Knowledge base content: research what combination of photography principles, art direction, and Flux techniques produces best output

### JP Localization Agent

#### Quality Gate Design
- Evaluation criteria: research what Japanese copy quality criteria matter most for advertising effectiveness (naturalness, persuasiveness, cultural resonance, register appropriateness)
- Critique feedback format: research what feedback format produces the best rewrite quality in LLM-to-LLM critique loops
- Compliance overlap with Phase 12: research whether early flagging of obvious violations (薬機法, 景品表示法) reduces Phase 12 workload or creates confusion
- Knowledge base needs: research whether JP Localization needs specialized knowledge beyond what's in Copywriter's base

### Cross-Cutting: Prompt Engineering Practices
- All agent prompts must use researched best prompt engineering practices with proven examples
- Research specific techniques: chain-of-thought, few-shot examples, structured output, temperature tuning, system prompt design
- Each agent's prompt documented with rationale for every design decision

### Cross-Cutting: Research Tooling
- Exa search MCP must be used in addition to standard research tools for higher quality research findings
- NotebookLM notebooks created for each agent that needs domain expertise — knowledge baked into prompts at engineering time
- Runtime NotebookLM querying stays in Phase 11

### Cross-Cutting: Quality Evaluation
- Evaluation methodology: research best practices for evaluating LLM creative output in marketing domains
- Test briefs: Japanese small business mix — cosmetics, food/restaurant, fashion, personal service (nail/hair salon), online course/coaching
- Include edge cases: vague briefs, unusual product categories, briefs with conflicting information (2-3 intentionally difficult briefs)
- A/B comparison between naive prompts and optimized prompts across all 5 agents

### Claude's Discretion
- Specific prompt engineering technique selection per agent (CoT, few-shot, structured output, etc.)
- Temperature and parameter tuning per agent
- NotebookLM notebook content curation per agent
- Evaluation rubric design and scoring methodology
- Exact test brief content within the specified categories
- Whether to use separate prompts or unified prompt for Art Director self-critique

</decisions>

<specifics>
## Specific Ideas

- "Meta-prompt system for Art Director" — not a fixed style, an intelligent prompt-building agent that produces detailed, case-specific image prompts
- "Framework-specific labels, prompts as a cohesive system" — all 5 agent prompts designed as an interconnected system, not independent prompts
- Japanese market authenticity is the primary concern — research Japanese advertising practices rather than assuming Western frameworks translate
- "Confidence scores: generate but don't mandate" — pragmatic approach balancing data availability with complexity avoidance for solopreneur product
- Mode-dependent behavior (Auto vs Pro) applies to both Creative Director concept output and Art Director variation count

</specifics>

<deferred>
## Deferred Ideas

None — discussion stayed within phase scope

</deferred>

---

*Phase: 09.1-agent-prompt-engineering-photorealistic-output*
*Context gathered: 2026-02-19*
