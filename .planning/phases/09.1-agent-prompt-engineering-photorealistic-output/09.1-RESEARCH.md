# Phase 9.1: Agent Prompt Engineering + Photorealistic Output - Research

**Researched:** 2026-02-19
**Domain:** Prompt engineering for 5 pipeline agents (Claude) + photorealistic image generation (Flux 1.1 Pro Ultra) + Japanese advertising domain expertise
**Confidence:** MEDIUM-HIGH

---

<user_constraints>
## User Constraints (from CONTEXT.md)

### Locked Decisions

#### Strategic Insight Agent
- Research-driven decision on whether Schwartz awareness levels, LF8 desires, and SB7 triggers are the right frameworks for the Japanese market
- Full framework swap is acceptable if Japanese-native frameworks are clearly better
- Validate each dimension independently -- awareness, desires, and triggers may each have different outcomes (some stay, others swap)
- Research what Japanese advertisers actually use for their own market
- Framework-specific labels in output schema (not generic field names) -- downstream agent prompts are engineered as a cohesive system that understands the chosen terminology
- Always infer confidently from whatever brief information is available -- pipeline never stalls on sparse input
- Confidence scores: generate (high/medium/low) per classification but don't mandate downstream agents to act on them -- free data at negligible token cost
- Whether to include market/competitive context analysis: research what's useful for downstream agents

#### Creative Director Agent
- NotebookLM knowledge base created in Phase 9.1 with Japanese creative direction conventions
- Knowledge extracted from notebook and baked directly into the prompt (runtime live querying is Phase 11)
- Japanese creative conventions researched and encoded into the prompt -- creativity from researched knowledge, not random LLM generation
- Few-shot examples: research whether they add value and how to design them effectively
- Mode-dependent concept generation: single best concept for Auto mode (frictionless), 2-3 concept options for Pro mode (user choice)
- Output format (structured creative brief vs narrative): research what format downstream agents work best with

#### Copywriter Agent
- Japanese register: research Japanese advertising norms to determine register by product category (not a single default)
- Language approach: research whether Claude produces better Japanese marketing copy natively in Japanese or via English intermediate step
- Platform-specific copy: research Japanese platform norms -- what works on LINE vs Instagram vs X in Japan may require fundamentally different approaches, not just reformatting
- Output includes copy + rationale notes explaining key decisions (word choice, CTA style, register) -- enables more efficient JP Localization review and faster critique loop resolution

#### Art Director Agent
- Case-by-case prompt generation via a meta-prompt system -- no fixed visual style template
- The meta-prompt teaches the agent HOW to craft detailed, photorealistic image prompts regardless of specific scenario
- Category-aware prompt templates for different product types (cosmetics, food, fashion, service, tech, etc.) -- different categories need fundamentally different visual approaches
- Category classification mechanism: research the most effective approach (upstream classification vs Art Director inference vs predefined set)
- Default demographic: Japanese models and features matching the Japanese marketing audience
- Anti-patterns to avoid: plastic/pore-less skin, flat lighting without shadows or depth, generic poses/expressions, lack of imperfections and random natural elements
- Self-critique loop: Art Director reviews its own prompts against a quality checklist before finalizing -- mandatory step
- Self-critique architecture (separate evaluation call vs chain-of-thought): research best approach
- Camera/lens/film descriptors as realism technique: research best approach for Flux
- Negative prompt strategy: research whether Flux effectively uses negative prompts
- Meta-prompt scope (people only vs all visuals): research what's needed
- Text compositing awareness (safe zones for Japanese text overlay): research whether it improves final output
- Image variations: mode-dependent (1 optimized prompt for Auto, 2-3 variations for Pro)
- Video prompt scope (static images only vs keyframes/thumbnails): research whether unified visual prompting improves consistency
- Knowledge base content: research what combination of photography principles, art direction, and Flux techniques produces best output

#### JP Localization Agent
- Evaluation criteria: research what Japanese copy quality criteria matter most for advertising effectiveness (naturalness, persuasiveness, cultural resonance, register appropriateness)
- Critique feedback format: research what feedback format produces the best rewrite quality in LLM-to-LLM critique loops
- Compliance overlap with Phase 12: research whether early flagging of obvious violations (薬機法, 景品表示法) reduces Phase 12 workload or creates confusion
- Knowledge base needs: research whether JP Localization needs specialized knowledge beyond what's in Copywriter's base

#### Cross-Cutting
- All agent prompts must use researched best prompt engineering practices with proven examples
- Research specific techniques: chain-of-thought, few-shot examples, structured output, temperature tuning, system prompt design
- Each agent's prompt documented with rationale for every design decision
- Exa search MCP must be used in addition to standard research tools for higher quality research findings
- NotebookLM notebooks created for each agent that needs domain expertise -- knowledge baked into prompts at engineering time
- Runtime NotebookLM querying stays in Phase 11
- Evaluation methodology: research best practices for evaluating LLM creative output in marketing domains
- Test briefs: Japanese small business mix -- cosmetics, food/restaurant, fashion, personal service (nail/hair salon), online course/coaching
- Include edge cases: vague briefs, unusual product categories, briefs with conflicting information (2-3 intentionally difficult briefs)
- A/B comparison between naive prompts and optimized prompts across all 5 agents

### Claude's Discretion
- Specific prompt engineering technique selection per agent (CoT, few-shot, structured output, etc.)
- Temperature and parameter tuning per agent
- NotebookLM notebook content curation per agent
- Evaluation rubric design and scoring methodology
- Exact test brief content within the specified categories
- Whether to use separate prompts or unified prompt for Art Director self-critique

### Deferred Ideas (OUT OF SCOPE)
None -- discussion stayed within phase scope
</user_constraints>

---

<phase_requirements>
## Phase Requirements

| ID | Description | Research Support |
|----|-------------|-----------------|
| ORCH-04 | Strategic Insight agent classifies brief into awareness level, desires, and copywriting framework | Section 1: Framework validation research confirms hybrid approach -- keep Schwartz + LF8 with Japanese adaptation, replace SB7 with broader framework set |
| ORCH-05 | Creative Director generates creative concept, visual mood, and copy direction from strategy | Section 3: Creative Director output format research, few-shot example design, Japanese creative conventions |
| ORCH-06 | Copywriter generates copy variants per platform using selected framework and register | Section 4: Register-by-category mapping, platform-specific norms, Claude Japanese copy quality |
| ORCH-07 | Art Director generates image prompts, visual direction, and composition guidance | Section 5: Flux prompt engineering, meta-prompt system design, photorealistic techniques, negative prompt findings |
| ORCH-08 | JP Localization reviews all copy/visual output with veto power and critique loop (max 2 retries) | Section 6: Critique loop architecture, feedback format research, evaluation criteria |
| ORCH-09 | Quality gate validates Strategic Insight output completeness | Section 1: Output schema validation criteria for chosen frameworks |
| ORCH-13 | Agent scratchpad passes only structured JSON summaries between agents | Section 7: Prompt engineering practices for structured output via tool-use |
| ORCH-14 | Tiered model assignment (configurable per agent) | Section 7: Temperature and model selection recommendations per agent |
| GENX-09 | Pipeline generates quality images without brand profile by inferring defaults | Section 5: Art Director inference instructions and category-aware fallback prompts |
</phase_requirements>

---

## Summary

This phase optimizes prompts for all 5 pipeline agents and establishes a photorealistic image generation methodology. The research covers six interconnected domains: (1) Japanese advertising framework validation, (2) Claude prompt engineering best practices, (3) Japanese copywriting norms and platform conventions, (4) Flux 1.1 Pro Ultra photorealistic prompt engineering, (5) LLM-to-LLM critique loop architecture, and (6) creative output evaluation methodology.

**Key discovery:** Japan has its own advertising framework ecosystem that diverges significantly from Western models. The AIDMA model (Attention-Interest-Desire-Memory-Action, dominant in traditional Japanese advertising) and AISAS model (Attention-Interest-Search-Action-Share, created by Dentsu in 2005 for the digital era) are the standard frameworks used by Japanese advertisers. Dentsu's "11 Desires" (11の欲望) framework is the Japanese-native equivalent of LF8 and is actively updated annually with Japan-specific consumer research. Eugene Schwartz's awareness levels are universal and applicable, but the copywriting framework dimension (PAS/AIDA/BAB/SB7) should be expanded to include AIDMA/AISAS. LF8 desires are universal but should be supplemented with Dentsu's Japan-specific desire research.

**Primary recommendation:** Use a hybrid framework approach: keep Schwartz awareness levels (universal), keep LF8 desires as the base but supplement with Dentsu's 11 Desires mapping for Japanese cultural nuance, and expand the copywriting framework set to include AIDMA and AISAS alongside PAS/AIDA/BAB (drop SB7 as a primary option -- it is narrative-focused and less actionable for short-form Japanese advertising copy). For Flux, use Raw Mode for photorealism, explicit camera/lens descriptors, and eliminate negative prompts (not supported). For Claude prompts, use XML-tagged structured system prompts with tool-use forced output, CoT for Strategic Insight only, and temperature 0.2-0.7 gradient from analytical to creative agents.

---

## 1. Strategic Insight Agent: Framework Validation

### 1.1 Schwartz Awareness Levels -- KEEP (Universal)

**Confidence: HIGH**

Eugene Schwartz's 5 Stages of Awareness (Unaware, Problem Aware, Solution Aware, Product Aware, Most Aware) from "Breakthrough Advertising" (1966) are **universal** and not culture-specific. They describe a prospect's cognitive state relative to a product, which applies regardless of market.

**Japanese context:** The concept maps cleanly to the Japanese marketing funnel. Japanese marketers use equivalent terminology (顧客認知レベル) though the Schwartz framing is not commonly cited by name in Japanese advertising literature. The classification task is straightforward for Claude -- it maps a brief's content to one of five stages based on how much the target audience already knows about the problem and solution.

**Recommendation:** Keep Schwartz awareness levels as-is. The 5 stages are well-defined, mutually exclusive, and actionable for downstream agents. No Japanese-specific replacement needed.

### 1.2 LF8 Life Force 8 Desires -- KEEP with Japanese Supplement

**Confidence: MEDIUM-HIGH**

Drew Eric Whitman's Life Force 8 from "Ca$hvertising" identifies eight hardwired human desires:
1. Survival, enjoyment of life, life extension
2. Enjoyment of food and beverages
3. Freedom from fear, pain, and danger
4. Sexual companionship
5. Comfortable living conditions
6. Superiority, winning, keeping up
7. Care and protection of loved ones
8. Social approval

**Japanese market reality:** LF8 is known and used in Japanese marketing circles (Japanese sources reference "8大欲求" and "LF8" directly). However, Dentsu -- Japan's largest advertising agency -- has developed its own "11 Desires" (11の欲望) framework through the DENTSU DESIRE DESIGN project, updated annually since 2021 using the "心が動く消費調査" (Heart-Moving Consumption Survey). This is the most authoritative Japanese-native consumer desire framework.

The Dentsu 11 Desires framework includes culturally specific desire clusters that LF8 misses, such as desires related to self-narrative ("物語る"), social belonging beyond approval ("属する"), and the desire for agency/decisiveness ("決する"). Japanese consumer psychology research also identifies a separate framework based on two root instincts (生殖本能 reproductive instinct and 生存本能 survival instinct) that maps to 8 derivative desires: "安らぐ" (rest/peace), "進める" (advance), "決する" (decide), "有する" (possess), "属する" (belong), "高める" (elevate), "伝える" (communicate), "物語る" (narrate).

**Recommendation:** Keep LF8 as the base desire classification (it is well-defined, internationally recognized, and Claude already has strong training data on it). Supplement the Strategic Insight prompt with a Japanese cultural overlay that maps LF8 desires to their Japanese expressions and adds 3 Japan-specific desire nuances:
- **Social harmony (和/調和):** Goes beyond LF8's "social approval" -- in Japan, not standing out negatively is as important as being approved
- **Aesthetic refinement (美意識):** Japanese consumer culture places elevated importance on aesthetics, craftsmanship, and attention to detail
- **Security/reliability (安心・安全):** Stronger emphasis than LF8's "freedom from fear" -- Japanese consumers prioritize brand reliability and safety signals

### 1.3 Copywriting Frameworks -- EXPAND (Replace SB7, Add AIDMA/AISAS)

**Confidence: HIGH**

The current framework set is PAS, AIDA, BAB, SB7. Research findings:

**SB7 (StoryBrand):** While claimed to be universal, SB7 is a narrative framework designed for brand messaging (website copy, brand scripts). It is poorly suited for short-form advertising copy (LINE messages, Instagram captions, X posts). It produces 7-part story arcs when the pipeline needs platform-specific variants with headlines, bodies, and CTAs. **Recommendation: Drop SB7 from the primary set.**

**AIDMA:** This is the dominant traditional advertising model in Japan, proposed and widely adopted by Japanese marketers. It adds "Memory" between "Desire" and "Action" -- critical in Japanese advertising where brand recall and trust-building through repeated exposure is standard practice. **Recommendation: Add AIDMA.**

**AISAS:** Created by Dentsu in 2005, this is the standard digital marketing framework in Japan. It replaces the passive "Desire-Memory" sequence with "Search-Share," reflecting Japanese consumers' intense research behavior before purchase and post-purchase sharing behavior (particularly strong on X/Twitter Japan). **Recommendation: Add AISAS.**

**Final framework set:** PAS, AIDA, BAB, AIDMA, AISAS (5 frameworks). The Strategic Insight agent selects the most appropriate framework based on:
- Product type and purchase complexity
- Digital vs. traditional channel mix
- Target audience's likely information-seeking behavior
- Campaign objective (awareness vs. conversion vs. engagement)

### 1.4 Output Design -- Market Context Analysis

**Recommendation:** Include a brief market context field in Strategic Insight output. The Creative Director benefits from understanding competitive positioning context (e.g., "crowded market, differentiation needed" vs. "new category, education needed"). This costs negligible additional tokens and provides actionable intelligence. Implement as an optional `marketContext` string field.

### 1.5 Updated Output Schema

```typescript
interface StrategicInsightOutput {
  awarenessLevel: "unaware" | "problem_aware" | "solution_aware" | "product_aware" | "most_aware"
  awarenessConfidence: "high" | "medium" | "low"
  primaryDesires: string[]        // LF8 desire identifiers (1-3 selected)
  desireConfidence: "high" | "medium" | "low"
  japaneseDesireNuance?: string   // Optional: cultural overlay (和, 美意識, 安心 etc.)
  copywritingFramework: "PAS" | "AIDA" | "BAB" | "AIDMA" | "AISAS"
  frameworkConfidence: "high" | "medium" | "low"
  frameworkRationale: string      // Why this framework for this brief
  targetInsight: string           // Core audience insight (min 10 chars)
  creativeDirection: string       // Direction for Creative Director (min 10 chars)
  keyMessages: string[]           // 2-4 core messages
  tonalGuidance: string           // Register and tone recommendation
  marketContext?: string          // Brief competitive/market context
  summaryJa: string               // ~10 word Japanese summary
}
```

---

## 2. Claude Prompt Engineering Best Practices

### 2.1 Official Anthropic Guidance for Claude 4.6 (from docs)

**Confidence: HIGH** (Source: Anthropic official documentation, verified 2026-02-19)

Key practices from Anthropic's latest prompting documentation:

1. **Be explicit, not vague:** Claude 4.6 follows instructions precisely. "Include as many relevant features as possible" outperforms "create a good output."
2. **Add context/motivation:** Explaining WHY an instruction matters improves adherence. "Your output will be used by a downstream Japanese copywriter agent" > "format correctly."
3. **XML tags for structure:** Use `<section>` tags to organize prompts. Claude responds strongly to XML-delimited prompt sections.
4. **Remove anti-laziness prompts:** Claude 4.6 is already proactive. "Be thorough" and "think carefully" cause overthinking and write-then-rewrite loops. Remove these.
5. **Structured output via tool-use:** Use tools with `tool_choice: { type: "tool", name: "..." }` to force structured JSON output. This is the most reliable structured output method.
6. **Adaptive thinking:** Claude 4.6 uses adaptive thinking by default. Do NOT add "use the think tool to plan" instructions -- they cause over-planning.
7. **Effort parameter:** Use `effort` to control thinking depth. Strategic agents need "high", creative agents can use "medium".

### 2.2 Technique Recommendations Per Agent

| Agent | Primary Technique | Temperature | Effort | Why |
|-------|-------------------|-------------|--------|-----|
| Strategic Insight | Tool-use structured output + brief reasoning preamble | 0.2 | high | Analytical task, needs consistency |
| Creative Director | Tool-use structured output + few-shot examples | 0.5 | medium | Creative but needs structure |
| Copywriter | Tool-use structured output + register instructions + platform constraints | 0.7 | medium | Creative writing benefits from variety |
| Art Director | Tool-use structured output + meta-prompt with quality checklist | 0.5 | high | Complex prompt generation needs deliberation |
| JP Localization | Tool-use structured output + rubric-based evaluation | 0.2 | high | Quality evaluation needs consistency |

### 2.3 Few-Shot Examples: Research Findings

**Confidence: MEDIUM**

Research and Anthropic docs indicate:
- Few-shot examples are highly effective for **format demonstration** -- showing Claude exactly what a good output looks like
- For Claude 4.6, 1-3 examples are optimal. More examples add diminishing returns and consume context
- Examples should match the EXACT desired output format (including JSON structure for tool-use)
- For creative tasks, examples can **constrain** creativity if they're too specific -- use diverse examples that show range

**Recommendation for this system:**
- **Strategic Insight:** 1 complete example showing a full classification with rationale
- **Creative Director:** 2 examples showing different concept styles (product-focused vs. lifestyle)
- **Copywriter:** 2 examples showing different registers (casual vs. formal) with platform adaptations
- **Art Director:** 2-3 examples showing different category prompts (cosmetics vs. food vs. fashion)
- **JP Localization:** 1 example showing approval + 1 example showing rejection with specific critique

### 2.4 System Prompt Design Pattern

Use this structure for all agent system prompts:

```
<role>
[Agent identity and expertise]
</role>

<knowledge>
[Domain knowledge baked from NotebookLM research -- frameworks, conventions, anti-patterns]
</knowledge>

<task>
[Specific task description with success criteria]
</task>

<constraints>
[Hard constraints: register, character limits, platform rules]
</constraints>

<output_format>
[Exact output structure matching the tool schema]
</output_format>

<examples>
[1-3 few-shot examples in exact tool-use format]
</examples>
```

This XML-tagged structure leverages Claude 4.6's strong instruction following and keeps sections clearly delineated.

---

## 3. Creative Director Agent: Output Format and Knowledge

### 3.1 Output Format -- Structured Creative Brief

**Confidence: MEDIUM-HIGH**

Research on what downstream agents work best with:

**Structured brief (recommended)** over narrative format because:
- Copywriter agent can parse specific fields (tonal guidance, key messages, platform adaptations) without ambiguity
- Art Director agent can extract visual concept, color guidance, and mood keywords directly
- JSON structure enforces completeness -- no risk of omitting critical direction
- Easier for JP Localization to reference specific fields in critique

**Recommendation:** Use structured creative brief with these sections:
- `concept`: One-sentence concept distillation
- `visualConcept`: Detailed visual direction
- `colorGuidance`: Specific color palette with hex codes when available
- `compositionNotes`: Layout and framing direction
- `moodKeywords`: 4-6 mood/atmosphere keywords
- `copyDirection`: Tonal guidance for Copywriter
- `platformAdaptations`: Per-platform visual/copy adaptation notes
- `summaryJa`: Japanese summary

### 3.2 Japanese Creative Direction Conventions

**Confidence: MEDIUM** (synthesized from multiple sources)

Key conventions to bake into the Creative Director prompt:

1. **Indirectness over hard sell:** Japanese advertising favors suggestion and mood over direct claims. "Feel the difference" > "Our product is 50% better"
2. **Seasonal sensitivity (季節感):** Japanese campaigns strongly reference seasons. Cherry blossom (spring), fireworks/festivals (summer), autumn leaves (fall), year-end/New Year (winter)
3. **Kawaii and relatability:** For consumer products, approachable and endearing aesthetics often outperform aspirational luxury (market segment dependent)
4. **Wa (harmony) in visual composition:** Balance, negative space, and visual harmony are culturally valued. Cluttered, aggressive designs can feel foreign
5. **Trust signals:** Japanese consumers value third-party validation, awards, user counts, and longevity ("since 19XX") more than Western consumers

### 3.3 Few-Shot Example Design

Design few-shot examples that demonstrate RANGE, not a single style:
- Example A: Cosmetics brand -- warm, aspirational, elegant visual concept
- Example B: Restaurant/food -- appetizing, vibrant, seasonal visual concept

Each example should show the full tool-use output including all required fields.

---

## 4. Copywriter Agent: Japanese Copy Norms and Platform Conventions

### 4.1 Register by Product Category

**Confidence: MEDIUM-HIGH**

Based on Japanese advertising norms research:

| Product Category | Recommended Register | Rationale |
|-----------------|---------------------|-----------|
| Cosmetics/Beauty | Standard (です/ます) to Formal | Premium feel, trust, sophistication expected |
| Food/Restaurant | Casual (タメ口) to Standard | Warmth, approachability, appetite appeal |
| Fashion | Casual to Standard | Trend-driven, younger audience, relatability |
| Personal Service (salon) | Standard (です/ます) | Professional trust + warmth balance |
| Online Course/Coaching | Standard to Formal | Authority, expertise signaling |
| Tech/Electronics | Standard (です/ます) | Reliability, precision, trust |
| Luxury | Formal (尊敬語/謙譲語) | Exclusivity, premium positioning |
| Kids/Family | Casual | Warmth, fun, approachability |

The Copywriter prompt should include this mapping as a lookup table. When `brief.registerOverride` is set, it takes precedence. Otherwise, infer from product category.

### 4.2 Claude's Japanese Copy Quality: Native vs. English Intermediate

**Confidence: MEDIUM**

Research findings on Claude's multilingual capabilities:
- Claude Opus 4.6 achieves 96.9% relative performance vs. English on MMLU benchmarks for Japanese (Anthropic official data)
- In a Lokalise blind study, professional translators rated Claude 3.5's translations "good" more often than GPT-4, DeepL, or Google Translate
- Claude scored first in 9 of 11 language pairs in WMT24 translation competition
- Japanese-specific: Claude produces natural expressions that read well, though cultural subtleties in marketing contexts may need review (which is exactly what JP Localization agent does)

**Recommendation: Generate Japanese copy directly in Japanese.** Reasons:
1. Direct generation avoids "translationese" -- the subtle unnaturalness that comes from thinking in English first
2. Claude's Japanese performance is strong enough for advertising copy (96.9% relative)
3. The JP Localization agent provides a dedicated quality gate for catching any issues
4. The system prompt should be in English (Claude's strongest reasoning language) but instruct output in Japanese
5. Include explicit instructions about tri-script mixing (漢字/ひらがな/カタカナ) rules already present in the existing `copy-generation.ts` prompts

### 4.3 Platform-Specific Japanese Advertising Norms

**Confidence: HIGH** (multiple authoritative Japanese marketing sources)

#### LINE (96M+ users, Japan's #1 platform)
- **Tone:** Friendly, conversational, like messaging a friend
- **Format:** Short messages, emoji acceptable (but controlled), sticker-culture awareness
- **CTA style:** Soft CTAs ("詳しくはこちら" / "チェックしてみてね") over hard sells
- **Rich message constraints:** Title max ~20 chars, description max ~50 chars
- **Key insight:** LINE users expect value-first messaging. Overly promotional content gets blocked quickly

#### Instagram (56M+ users in Japan)
- **Tone:** Visual-first, aspirational but authentic
- **Format:** Longer captions acceptable (up to 2200 chars), hashtag culture is strong
- **CTA style:** Engagement-focused ("いいね&保存してね", "コメントで教えて")
- **Hashtag strategy:** Mix of Japanese and English hashtags (3-10 per post), include niche community tags
- **Key insight:** Japanese Instagram users are highly engaged with Stories and Reels. Caption quality matters more than on Western Instagram

#### X/Twitter Japan (67M+ users, one of world's largest markets)
- **Tone:** Informational, witty, or trend-riding
- **Format:** 140 character limit (Japanese characters = fewer words needed), thread culture
- **CTA style:** Retweet-oriented ("RT嬉しいです"), engagement questions
- **Key insight:** Japan has one of the world's largest X user bases. Anonymous culture means users are more opinionated. Trending topics matter enormously. Seasonal/event hashtags drive massive engagement

### 4.4 Rationale Notes in Output

The Copywriter should include `rationaleNotes` alongside each copy variant explaining:
- Register choice and why
- CTA style decision (soft vs. direct) and why
- Key word choices that serve the strategic framework
- Platform-specific adaptations made

This enables JP Localization to review efficiently and provides audit trail for prompt optimization.

---

## 5. Art Director Agent: Photorealistic Prompt Engineering

### 5.1 Flux 1.1 Pro Ultra: Capabilities and Limitations

**Confidence: HIGH** (Source: Black Forest Labs official documentation, fal.ai API docs)

**Key capabilities:**
- Up to 4MP resolution (2x standard models)
- Ultra-fast generation at high resolution
- **Raw Mode:** Captures authentic feel of candid photography. Enhances diversity in human subjects and improves nature photography realism. **Use Raw Mode for all photorealistic generation.**
- Image-to-Image support with adjustable influence strength (0.0-1.0)
- Aspect ratio control (1:1, 4:3, 16:9, 9:16, etc.)
- Seed parameter for reproducible results
- Safety tolerance control (0-6)

**Critical limitation -- No negative prompt support:**
Flux 1.1 Pro Ultra does NOT support negative prompts. The official API parameters include prompt, aspect_ratio, raw, safety_tolerance, seed, output_format -- but no negative_prompt parameter. Flux.2 [MAX] also confirms no negative prompt support.

**Recommendation:** Remove the `negativePrompt` field from the ArtDirectorOutput schema (or keep it as an optional documentation field that the Art Director uses as "avoid" guidance when crafting the positive prompt). All avoidance instructions must be phrased positively in the prompt itself.

### 5.2 Prompt Structure for Photorealism

**Confidence: HIGH** (multiple verified sources)

Use Black Forest Labs' official prompt framework: **Subject + Action + Style + Context**

The official guidance states:
- **Word order matters:** Front-load the most important elements. Flux pays more attention to what comes first
- **Priority order:** Main subject > Key action > Critical style > Essential context > Secondary details
- Use natural language for relationships and descriptions
- Use direct specifications for technical and atmospheric elements

### 5.3 Camera/Lens Descriptors -- HIGHLY EFFECTIVE

**Confidence: HIGH** (multiple prompt engineering guides confirm)

Specifying camera equipment in prompts is one of the most effective photorealism techniques. It triggers the model's learned associations with real photographic quality.

**Recommended descriptors by category:**

| Category | Camera/Lens | Lighting | Why |
|----------|-------------|----------|-----|
| Cosmetics/Beauty | Canon EOS R5, 85mm f/1.4 | Soft studio lighting, beauty dish | Flattering portraits, skin detail |
| Food/Restaurant | Sony A7 IV, 50mm f/1.8 macro | Natural window light, warm tones | Appetizing detail, bokeh |
| Fashion | Nikon Z9, 35mm f/1.4 | Natural light, golden hour | Editorial feel, environmental |
| Personal Service | Canon EOS R6, 50mm f/1.4 | Soft ambient, warm tones | Approachable, intimate |
| Tech/Product | Sony A7R V, 90mm macro | Clean studio, controlled | Precision, detail |

### 5.4 Skin Realism Anti-Patterns and Solutions

**Confidence: HIGH** (core research finding)

Flux's default output often produces skin that appears "plastic-like" -- a known limitation noted by multiple sources. The Art Director meta-prompt MUST include specific counter-instructions:

**Anti-patterns to explicitly counter:**
1. **Plastic skin:** Counter with "visible skin pores, natural skin texture with fine details, subtle imperfections"
2. **Flat lighting:** Counter with "subsurface scattering, three-point lighting with visible shadow transitions, rim lighting"
3. **Generic poses:** Counter with "candid moment, natural body language, asymmetric pose"
4. **Over-smoothing:** Counter with "fine facial hair, visible skin texture at macro level, natural skin variation"
5. **Uncanny valley eyes:** Counter with "natural eye moisture, realistic iris detail, subtle eye reflection"

**Photorealism keyword stack (include in all people-focused prompts):**
```
natural skin texture with visible pores, subsurface scattering,
[camera/lens descriptor], shallow depth of field, natural lighting
with soft shadow transitions, candid expression, [ethnicity-appropriate
features], shot on [film stock] film grain, 8K resolution
```

### 5.5 Meta-Prompt System Design

**Confidence: MEDIUM-HIGH**

The Art Director operates as a **meta-prompt system** -- it does not have fixed image prompts but rather generates them based on the creative brief. The system prompt teaches the agent HOW to craft prompts, not WHAT to write.

**Architecture:**

```
System Prompt (meta-prompt):
  <role> Expert art director and Flux prompt engineer </role>
  <photography_knowledge>
    - Camera/lens lookup by category
    - Lighting techniques by mood
    - Composition rules (rule of thirds, leading lines, etc.)
    - Japanese advertising visual conventions
  </photography_knowledge>
  <flux_specific_knowledge>
    - Raw Mode always enabled for realism
    - Word order priority (subject first)
    - No negative prompts -- phrase avoidances positively
    - Camera/lens descriptors boost realism
    - Specific skin realism keywords
  </flux_specific_knowledge>
  <category_templates>
    - Cosmetics: beauty shot conventions, soft lighting, close-up focus
    - Food: appetizing composition, warm tones, macro detail
    - Fashion: editorial styling, environmental context, lifestyle
    - Service: human connection, warm environment, trust-building
    - Tech: clean product focus, minimal background, precision
  </category_templates>
  <quality_checklist>
    [Self-critique checklist -- see 5.6]
  </quality_checklist>
  <anti_patterns>
    [Explicit list of what NOT to produce and how to counter]
  </anti_patterns>
```

**Category classification:** Use **Art Director inference** from the creative brief content. The brief already contains product information and the Creative Director's visual concept. The Art Director can infer category without a separate classification step. Include a `productCategory` field in the output for transparency.

### 5.6 Self-Critique Loop -- CHAIN-OF-THOUGHT (Single Call)

**Confidence: MEDIUM-HIGH**

Research on self-critique architectures reveals:
- **Separate evaluation call:** More tokens, more latency, but provides independent assessment. Research shows LLMs with "a certain IQ threshold" (larger models) can effectively self-correct
- **Chain-of-thought within single call:** Less overhead, but evaluation may be influenced by generation bias
- **Key finding from "The Mirror Loop" paper:** Ungrounded self-critique (no external feedback) leads to "reformulation rather than progress" -- the model rephrases but doesn't improve. However, with a **concrete checklist** (grounding), self-critique is effective

**Recommendation: Use chain-of-thought self-critique within a single call, grounded by a concrete quality checklist.** The Art Director prompt instructs:

1. Generate the image prompt
2. Review against this checklist:
   - [ ] Includes camera/lens specification?
   - [ ] Includes specific lighting description?
   - [ ] Includes skin realism keywords (for people)?
   - [ ] Avoids anti-pattern language (perfect, flawless, smooth skin)?
   - [ ] Specifies Japanese demographic when featuring people?
   - [ ] Includes composition direction (rule of thirds, etc.)?
   - [ ] Front-loads the most important subject?
   - [ ] Respects safe zone for text compositing (if applicable)?
3. Revise the prompt based on checklist failures
4. Output the final prompt

This approach is better than a separate call because:
- The checklist provides external grounding (preventing the "mirror loop")
- Single call reduces latency and cost
- Claude Opus 4.6 is capable enough for effective self-correction on this task type
- The tool-use output captures only the final version (no wasted tokens in the pipeline)

### 5.7 Text Compositing Awareness

**Confidence: MEDIUM**

The existing system already has a compositing pipeline (Phase 2). Including text safe zones in the image prompt can improve final output by ensuring the AI-generated image leaves appropriate space for Japanese text overlay.

**Recommendation:** Include compositing awareness as an optional instruction in the Art Director prompt:
- "Leave the [top/bottom] third relatively uncluttered for text overlay"
- "Ensure the main subject is positioned to allow text in the [opposite area]"
- This should be a soft guideline, not a hard constraint -- composition quality takes priority

### 5.8 Meta-Prompt Scope

**Recommendation: All visuals, not just people.** The Art Director needs to handle:
- People-focused: Model shots, lifestyle, testimonials
- Product-focused: Product photography, flat lay, detail shots
- Environment-focused: Store, location, atmosphere
- Abstract: Brand mood, conceptual, seasonal imagery

The category templates in the meta-prompt handle this naturally. People-specific instructions (skin realism, demographic) apply conditionally.

### 5.9 Video Prompt Scope

**Recommendation: Static images only for Phase 9.1.** Video prompts require fundamentally different parameters (motion, duration, camera movement). The existing video pipeline (Kling, Runway) takes image inputs, so good still image prompts naturally feed into video generation. Unified visual prompting can be explored in a later phase if needed.

---

## 6. JP Localization Agent: Quality Gate Design

### 6.1 Evaluation Criteria (Rubric)

**Confidence: MEDIUM-HIGH**

Based on Japanese advertising quality research and the AdTEC benchmark (CyberAgent's ad text evaluation benchmark):

**Primary criteria (weighted):**
1. **Naturalness (自然さ) -- 30%:** Does the copy read like it was written by a native Japanese speaker? No awkward phrasing, correct particle usage, natural sentence flow
2. **Register consistency (敬語一貫性) -- 25%:** Is the keigo level consistent throughout? No mixing of casual and formal within the same piece
3. **Persuasiveness (説得力) -- 20%:** Does the copy effectively motivate the target action? Is the CTA compelling?
4. **Cultural resonance (文化的適合性) -- 15%:** Does the copy respect Japanese advertising conventions? Appropriate indirectness, seasonal awareness, trust signals
5. **Platform fit (プラットフォーム適合性) -- 10%:** Does the copy match the platform's conventions? Right length, right tone for the channel

### 6.2 Critique Feedback Format -- STRUCTURED with Specific Fixes

**Confidence: HIGH** (based on LLM critique loop research)

Research findings on effective feedback formats for LLM-to-LLM critique loops:

1. **Specific > general:** "The headline mixes casual and formal register (だよ + です)" beats "the register is inconsistent"
2. **Include location:** Point to exact fields (platform, variant, field) so the Copywriter knows exactly what to fix
3. **Provide suggestion, not just critique:** Including a suggested fix significantly improves rewrite quality. "Change 'めっちゃお得だよ' to 'とてもお得です' to match standard register" is most effective
4. **Score the attempt:** A numeric quality score (0-100) enables best-of-3 selection on exhaustion
5. **Limit critique scope:** Focus on the 3-5 most impactful issues, not an exhaustive list. LLMs struggle to address more than ~5 issues in a single revision pass

**Recommended critique schema:**
```typescript
interface LocalizationCritique {
  approved: boolean
  qualityScore: number  // 0-100
  issues: {
    platform: string
    variant: string
    field: "headline" | "body" | "cta" | "hashtags"
    category: "naturalness" | "register" | "persuasiveness" | "cultural" | "platform"
    issue: string       // Specific problem in Japanese
    suggestion: string  // Specific fix in Japanese
    severity: "critical" | "moderate" | "minor"
  }[]
  overallNote: string   // Summary feedback in Japanese
  summaryJa: string     // ~10 word summary
}
```

### 6.3 Compliance Overlap with Phase 12

**Confidence: MEDIUM**

**Recommendation: Include lightweight flagging only.** The JP Localization agent should flag obvious, clear-cut compliance violations (e.g., "肌荒れを治す" for cosmetics -- a well-known 薬機法 violation) as a `complianceFlag` field in its output, but should NOT attempt rewrites for compliance. Reasons:

1. Phase 12 implements a proper two-pass compliance engine with regex + LLM
2. False positives from JP Localization could create confusion about what's "approved"
3. The flag serves as an early warning that reduces surprise in Phase 12
4. Keep the JP Localization agent focused on linguistic quality, not legal compliance

Add a `complianceFlags?: string[]` optional field to JpLocalizationOutput.

### 6.4 JP Localization Knowledge Base Needs

**Recommendation: Yes, JP Localization needs its own knowledge base** with:
- Common Japanese copywriting mistakes LLMs make (particle errors, unnatural keigo patterns, "translationese" indicators)
- Japanese advertising convention reference (seasonal language, polite request patterns, CTA conventions)
- Register reference guide with examples per level
- Platform-specific tone expectations

This overlaps with but differs from the Copywriter's knowledge base. The Copywriter needs knowledge about HOW to write; JP Localization needs knowledge about HOW to evaluate.

---

## 7. Cross-Cutting: Prompt Engineering Architecture

### 7.1 Prompts as a Cohesive System

All 5 agent prompts share a common vocabulary established by the Strategic Insight agent. When Strategic Insight outputs `copywritingFramework: "AISAS"`, the Copywriter prompt must understand AISAS and structure copy accordingly. When it outputs `awarenessLevel: "problem_aware"`, the Creative Director must adjust visual approach to problem-recognition rather than product showcase.

**Implementation:** Each agent prompt includes a `<upstream_context>` section that documents:
- What fields from upstream agents it reads
- How it interprets each field
- How upstream decisions affect its output

### 7.2 Temperature Gradient

```
Strategic Insight:  0.2  (analytical, consistent)
JP Localization:    0.2  (evaluative, consistent)
Creative Director:  0.5  (creative but structured)
Art Director:       0.5  (creative but needs technical precision)
Copywriter:         0.7  (maximum creative variation for 4 variants)
```

### 7.3 Structured Output via Tool-Use

All agents use the Anthropic tool-use API with `tool_choice: { type: "tool", name: "deliver_*" }`. This is the most reliable structured output method per Anthropic docs. The tool schema acts as both output constraint and documentation.

### 7.4 Model Selection

All agents default to `claude-opus-4-6` via `AGENT_*_MODEL` env vars. For cost optimization later:
- Strategic Insight and JP Localization: Keep on Opus (analytical quality matters)
- Creative Director: Can potentially downgrade to Sonnet 4.6 (creative tasks are less model-sensitive)
- Copywriter and Art Director: Can potentially downgrade to Sonnet 4.6

This optimization is data-driven -- defer until cost data from Phase 9 is available.

---

## 8. Quality Evaluation Methodology

### 8.1 Evaluation Approach

**Confidence: MEDIUM** (creative output evaluation is inherently subjective)

Research from the "Creativity Benchmark" paper (2025) reveals:
- LLM creative output quality is tightly clustered across models -- the top model beats the lowest only ~61% of the time in human pairwise comparisons
- **LLM-as-judge setups show weak, inconsistent correlations with human rankings** -- automated judges cannot substitute for human evaluation of creative output
- Conventional creativity tests transfer only partially to brand-constrained tasks

**Recommendation for Phase 9.1 evaluation:**

1. **A/B comparison methodology:** For each test brief, generate output with both naive prompts (Phase 9 defaults) and optimized prompts (Phase 9.1 engineered). Evaluate both side-by-side.

2. **Evaluation dimensions per agent:**

| Agent | Evaluation Criteria | Scoring |
|-------|--------------------|---------|
| Strategic Insight | Classification accuracy, insight depth, framework appropriateness | 1-5 rubric per dimension |
| Creative Director | Concept clarity, visual specificity, downstream actionability | 1-5 rubric per dimension |
| Copywriter | Japanese naturalness, register correctness, persuasiveness, platform fit | 1-5 rubric per dimension |
| Art Director | Prompt specificity, realism technique inclusion, category awareness | 1-5 rubric per dimension, + generated image quality |
| JP Localization | Critique accuracy, suggestion quality, false positive/negative rate | 1-5 rubric per dimension |

3. **Test brief set (5 standard + 2-3 edge cases):**

**Standard briefs:**
- Cosmetics: New organic skincare line for 30s women
- Food/Restaurant: Ramen shop grand opening in Shibuya
- Fashion: Spring collection for young professionals
- Personal Service: New nail salon in Omotesando
- Online Course: Business English coaching for corporate

**Edge cases:**
- Vague brief: "Something for my business" (minimal information)
- Conflicting brief: Luxury positioning but budget pricing, formal tone request but youth target
- Unusual category: Pet memorial service (emotionally sensitive)

4. **Scoring:** Average across all test briefs. Improvement threshold: optimized prompts should score >= 0.5 points higher (on 5-point scale) than naive prompts on average.

### 8.2 Evaluation Rubric Design (Claude's Discretion)

Each dimension scores 1-5:
- **1 (Poor):** Fundamentally broken, unusable output
- **2 (Below Average):** Major issues, would require significant human intervention
- **3 (Acceptable):** Functional but generic, typical LLM output quality
- **4 (Good):** Notably better than generic, demonstrates domain expertise
- **5 (Excellent):** Would pass professional review with minimal edits

The A/B comparison must show the optimized prompts consistently scoring 4+ where naive prompts score 2-3.

---

## Architecture Patterns

### Recommended Prompt File Structure

```
src/lib/ai/prompts/
  agents/
    strategic-insight.ts     # System prompt builder for Strategic Insight
    creative-director.ts     # System prompt builder for Creative Director
    copywriter.ts            # System prompt builder for Copywriter (extends existing)
    art-director.ts          # Meta-prompt builder for Art Director
    jp-localization.ts       # System prompt builder for JP Localization
  shared/
    frameworks.ts            # Shared framework definitions (Schwartz, LF8, AIDMA, etc.)
    register-map.ts          # Product category to register mapping
    platform-norms.ts        # Platform-specific advertising norms
    flux-techniques.ts       # Photorealism keywords, camera/lens database
    quality-checklist.ts     # Art Director self-critique checklist
  evaluation/
    test-briefs.ts           # Test brief definitions
    rubrics.ts               # Evaluation rubric definitions
    naive-prompts.ts         # Baseline naive prompts for A/B comparison
```

### Pattern: Meta-Prompt for Image Generation

```typescript
// The Art Director system prompt teaches HOW to create prompts
// The user message provides the specific creative brief
// The tool-use output captures the generated prompts

const systemPrompt = buildArtDirectorMetaPrompt({
  categoryTemplates: CATEGORY_TEMPLATES,
  cameraDatabase: CAMERA_LENS_DATABASE,
  realismTechniques: FLUX_REALISM_KEYWORDS,
  qualityChecklist: SELF_CRITIQUE_CHECKLIST,
  antiPatterns: PHOTOREALISM_ANTI_PATTERNS,
})

// Result: Art Director generates case-specific Flux prompts
// using the meta-prompt's teaching, not fixed templates
```

### Pattern: Critique Loop Feedback

```typescript
// JP Localization sends structured critique
// Copywriter receives original copy + critique as revision context
// Each revision attempt gets both the previous copy AND all critique history

interface RevisionContext {
  originalVariants: CopyVariant[]
  critiqueHistory: LocalizationCritique[]  // All previous critiques
  attemptNumber: number
  instruction: string  // "Fix only the specific issues listed. Keep everything else unchanged."
}
```

### Anti-Patterns to Avoid

- **Generic prompt preambles:** "You are a helpful assistant..." adds nothing. Be specific about expertise and task
- **Double-prompting for thinking:** Do not tell Claude 4.6 to "think step by step" -- it causes overthinking. The effort parameter controls this
- **Negative prompts for Flux:** They do not work. Rephrase all avoidances as positive descriptions
- **Mixing languages in Claude prompts:** System prompt in English (best reasoning), output instructions in Japanese. Do not write the entire system prompt in Japanese
- **Over-constraining creative agents:** The Copywriter needs freedom for 4 diverse variants. Too many rigid rules produce 4 identical outputs
- **Unbounded critique loops:** Always cap iterations (max 3 attempts). Research shows diminishing returns after 2-3 self-correction passes

---

## Don't Hand-Roll

| Problem | Don't Build | Use Instead | Why |
|---------|-------------|-------------|-----|
| Structured JSON output | Custom JSON parser for Claude responses | Anthropic tool-use with `tool_choice` | Tool-use guarantees schema compliance, handles edge cases |
| Framework lookup | Hardcoded if/else chains for framework selection | Data-driven lookup tables in shared modules | Easier to add/modify frameworks, testable |
| Register determination | Single hardcoded register per system | Category-to-register mapping table | Different products need different registers |
| Prompt template management | String concatenation | Builder functions with typed inputs | Type safety, testability, composability |
| Image prompt quality checking | Manual review of generated prompts | Checklist-based self-critique in Art Director prompt | Automated, consistent, no extra API call |
| A/B evaluation | Manual side-by-side comparison | Rubric-based scoring with defined criteria | Reproducible, quantifiable improvement measurement |

**Key insight:** The prompt engineering system is itself code that should be modular, testable, and maintainable. Each agent's prompt is a builder function, not a raw string.

---

## Common Pitfalls

### Pitfall 1: "Translationese" in Japanese Copy
**What goes wrong:** Claude generates Japanese that is grammatically correct but reads like translated English -- unnatural word order, Western idioms directly translated, overly direct CTAs
**Why it happens:** Claude's training data includes much translated content
**How to avoid:** Generate directly in Japanese (not translate), include explicit tri-script mixing rules, provide few-shot examples of excellent Japanese advertising copy, use JP Localization quality gate
**Warning signs:** Consistent JP Localization rejection, unnatural particle usage, Western CTA patterns ("今すぐ購入！")

### Pitfall 2: "AI-Smooth" Photorealistic Images
**What goes wrong:** Generated images look obviously AI -- perfect skin, flat lighting, generic poses
**Why it happens:** Default Flux output optimizes for "beauty" not "realism"
**How to avoid:** Always enable Raw Mode, include specific skin texture keywords, specify camera/lens equipment, add imperfection language ("slight freckles," "natural skin variation"), use the self-critique checklist
**Warning signs:** Models look like mannequins, lighting has no shadow depth, skin looks poreless

### Pitfall 3: Claude 4.6 Overthinking in Prompts
**What goes wrong:** Agent spends excessive tokens reasoning before producing output, or rewrites its own output multiple times
**Why it happens:** Claude 4.6 is more proactive than previous models; old-style "be thorough" prompts cause runaway thinking
**How to avoid:** Remove anti-laziness language, use effort parameter instead of prompt-based thinking control, keep prompts focused and action-oriented
**Warning signs:** High token costs per agent call, response latency > 60 seconds for simple briefs

### Pitfall 4: Critique Loop Convergence Failure
**What goes wrong:** JP Localization keeps rejecting but Copywriter revisions don't improve, or they "fix" one issue while creating another
**Why it happens:** The critique is too vague, or the Copywriter doesn't have enough context to understand what's wrong
**How to avoid:** Structured critique with specific field-level issues and suggested fixes, include all previous critique history in revision context, hard cap at 3 attempts
**Warning signs:** Quality scores don't improve between attempts, same issues reappear in different variants

### Pitfall 5: Framework Misclassification Cascading
**What goes wrong:** Strategic Insight picks the wrong awareness level or framework, causing all downstream agents to produce misaligned output
**Why it happens:** Vague briefs provide insufficient signal for confident classification
**How to avoid:** The "always infer confidently" instruction with confidence scores. Quality gate validates output structure (not classification correctness). The system accepts that some classifications may be imperfect -- this is acceptable for a solopreneur tool
**Warning signs:** Creative Director output doesn't match the brief's intent, Copywriter framework feels forced

---

## State of the Art

| Old Approach | Current Approach | When Changed | Impact |
|--------------|------------------|--------------|--------|
| Generic "be creative" prompts | Structured XML-tagged prompts with explicit constraints | Claude 4.x+ (2025) | Dramatically more consistent, higher quality output |
| AIDA-only marketing framework | Multiple frameworks (PAS, AIDA, BAB, AIDMA, AISAS) matched to context | 2024-2025 | Better alignment with Japanese digital marketing norms |
| "Photorealistic" keyword in prompts | Camera/lens/lighting descriptors + Raw Mode | Flux 1.1 Pro Ultra (late 2024) | Significantly more realistic images |
| Negative prompts for unwanted elements | Positive-only phrasing (Flux has no negative prompt support) | Flux architecture (2024+) | Must rethink avoidance strategy entirely |
| Single LLM call for generation+evaluation | Separate generation and critique (or checklist-grounded self-critique) | LLM self-correction research (2025) | Better output quality, but requires grounding to avoid "mirror loop" |
| Manual prompt iteration | Meta-prompt systems (LLM generates prompts for other models) | 2024-2025 | Scalable, category-aware prompt generation |
| Prefilled assistant responses for format control | Tool-use with forced tool_choice | Claude 4.6 (2026) | Prefills deprecated; tool-use is the standard |

**Deprecated/outdated:**
- Prefilled responses (`assistant` turn prefills) -- deprecated in Claude 4.6, use tool-use instead
- "Think step by step" explicit instructions -- causes overthinking in Claude 4.6, use effort parameter
- Negative prompts for Flux -- not supported, never were for Pro/Ultra models
- SB7 StoryBrand for short-form ad copy -- designed for brand scripts, not platform-specific advertising variants

---

## Open Questions

1. **Dentsu 11 Desires detailed mapping**
   - What we know: Dentsu's framework exists and is updated annually. We know the broad categories
   - What's unclear: The exact mapping between LF8 and Dentsu's 11 Desires for prompt encoding. Detailed documentation may require Japanese-language research beyond what's publicly available
   - Recommendation: Use LF8 as primary with Japanese cultural overlays. If deeper Dentsu integration is desired, create a NotebookLM notebook with Japanese marketing psychology sources

2. **Claude Japanese copy quality ceiling**
   - What we know: 96.9% relative performance on MMLU, strong translation ratings
   - What's unclear: Whether Claude can produce copy that matches a professional Japanese copywriter for emotional resonance and cultural nuance (not just grammatical correctness)
   - Recommendation: The JP Localization quality gate addresses this. Accept that some human editing may be needed for premium campaigns. This is appropriate for a solopreneur tool

3. **Flux Raw Mode consistency**
   - What we know: Raw Mode improves realism and diversity
   - What's unclear: How consistent Raw Mode results are across different categories (cosmetics vs. food vs. fashion). May need different prompt strategies per category
   - Recommendation: Test during evaluation phase. Category-specific prompt templates in the meta-prompt provide the flexibility to adapt

4. **Optimal few-shot example count per agent**
   - What we know: 1-3 examples is the recommended range for Claude 4.6
   - What's unclear: Whether adding examples for all 5 agents in their system prompts will collectively consume too many input tokens, increasing cost
   - Recommendation: Start with 1-2 examples per agent. Measure input token costs. Adjust based on the cost/quality tradeoff

---

## Sources

### Primary (HIGH confidence)
- Anthropic Claude Prompting Best Practices (official docs) -- Claude 4.6 prompting guidance, XML tags, tool-use, effort parameter, adaptive thinking
- Black Forest Labs Flux 1.1 Pro Ultra Documentation -- API parameters, Raw Mode, no negative prompt support, resolution capabilities
- Anthropic Multilingual Support Documentation -- Japanese 96.9% relative performance, best practices for multilingual content

### Secondary (MEDIUM confidence)
- Multiple Japanese marketing sources on AIDMA/AISAS frameworks (tayori.com, crexinc.jp, souken.shikigaku.jp) -- Japanese advertising framework ecosystem
- Dentsu DESIRE DESIGN project (advertimes.com, webtan.impress.co.jp) -- "11 Desires" framework, annual consumer research
- Japanese LF8 marketing sources (ain.or.jp, marketing-analytics.site) -- LF8 usage in Japanese marketing context
- Humble Bunny Japan social media guide (humblebunny.com) -- LINE/Instagram/X platform demographics and norms
- ULPA Japan advertising guide (ulpa.jp) -- LINE advertising norms and best practices
- Digital Marketing for Asia (digitalmarketingforasia.com) -- LINE ads platform specifics
- Next Diffusion Flux portrait prompts guide (nextdiffusion.ai) -- Camera angle, subject description, lighting techniques for Flux
- z-image.ai Flux 1.1 Prompt Engineering Guide -- Style modifiers, camera language, templates
- fal.ai Flux.2 Prompt Guide (fal.ai/learn) -- Subject-first prioritization, spatial composition
- Segmind Flux 1.1 Pro Raw Mode guide (blog.segmind.com) -- Raw Mode capabilities and comparison
- LLM Translation Benchmark 2026 (intlpull.com) -- Claude translation quality vs. competitors
- Creativity Benchmark paper (arxiv.org/abs/2509.09702) -- LLM creative output evaluation methodology

### Tertiary (LOW confidence)
- Medium articles on Flux negative prompts (medium.com/towards-agi) -- Workarounds for negative prompts in Flux (community techniques, not official)
- therightgpt.com photorealistic AI guide -- General photorealism techniques (not Flux-specific)
- RealCritic paper (arxiv.org/abs/2501.14492) -- LLM critique evaluation research
- Mirror Loop paper (arxiv.org/abs/2510.21861) -- Self-critique convergence limitations (flags need for grounding)
- Meta Prompting for AI Systems paper (arxiv.org/abs/2311.11482) -- Formal meta-prompting framework

---

## Metadata

**Confidence breakdown:**
- Framework validation (Schwartz/LF8/SB7): HIGH -- Multiple sources confirm Japanese market differences, clear recommendation to expand framework set
- Claude prompt engineering: HIGH -- Based on official Anthropic docs for Claude 4.6
- Japanese copywriting norms: MEDIUM-HIGH -- Multiple Japanese marketing sources, but register-by-category mapping is synthesized guidance
- Flux photorealistic techniques: HIGH -- Official docs confirm capabilities; community sources confirm camera/lens effectiveness
- Critique loop architecture: MEDIUM-HIGH -- Academic research supports recommendations; specific implementation for advertising copy is partially novel
- Evaluation methodology: MEDIUM -- Creative output evaluation is inherently subjective; research confirms LLM-as-judge is unreliable for this domain

**Research date:** 2026-02-19
**Valid until:** 2026-03-19 (30 days -- Claude model capabilities and Flux features are relatively stable)
